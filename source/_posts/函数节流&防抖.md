title: 函数防抖&节流  
date: 2018-01-02 00:34:13                
---
防抖：
好比公交车司机进站时，打开车门让乘客进来。不加防抖的场景是开一次车门，进来一个乘客，关一次车门。加防抖的场景，开一次车门，让乘客都进来再关车门。

节流：
好比抢购物券，点击次数越多，抢到的几率越大。不节流的话，写一个脚本，一秒钟可以点击上百万次，这样很不公平。加上节流，让规定时间内，点击多少次都算一下，就很公平。

> 防抖

```javascript
function debounce (fn, delay) {
  let timer = null;
  return function () {
    // 通过 ‘this’ 和 ‘arguments’ 获取函数的作用域和变量
    let context = this;
    let args = arguments;

    clearTimeout(timer);
    timer = setTimeout (function() {
      fn.apply(context, args);
    }, delay);
  }
}

```
> 节流

```javascript
var throttle = function (func,delay) {
    var prev = Date.now();
    return function () {
        var context = this;
        var args = arguments;
        var now = Date.now();
        if (now - prev >= delay) {
            func.apply(context, args);
            prev = Date.now();
        }
    }
}
```